function a(){try{return localStorage.getItem("token")||null}catch{return null}}async function s(o,e={}){const r=a(),n=e.headers||{};r&&(n.Authorization=`Bearer ${r}`),!n["Content-Type"]&&e.body&&typeof e.body=="object"&&(n["Content-Type"]="application/json");const t=await fetch(o,{...e,headers:n});if(!t.ok){const c=await t.text();throw new Error(`${t.status} ${c}`)}return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()}export{s as apiFetch,a as getToken};
